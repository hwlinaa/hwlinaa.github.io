<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>點亮祈福</title>
    <style>
        /* 基本設定，移除邊距，黑色背景 */
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            background-color: #000;
            overflow: hidden; /* 防止滾動 */
        }

        /* 容器：佔滿螢幕，用於捕捉點擊 */
        #container {
            position: relative;
            width: 100%;
            height: 100%;
            cursor: pointer;
        }

        /* 圖片與影片的通用樣式：絕對定位，填滿容器 */
        #dim-image, #lit-video {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover; /* 確保素材保持比例填滿螢幕，不會變形 */
            transition: opacity 0.8s ease-in-out; /* 讓切換時有淡入淡出效果 */
        }

        /* 影片初始狀態：透明度為 0 (隱藏) */
        #lit-video {
            opacity: 0;
            z-index: 1; /* 影片在下層 */
        }

        /* 圖片初始狀態：透明度為 1 (顯示) */
        #dim-image {
            opacity: 1;
            z-index: 2; /* 圖片在上層 */
        }

        /* 提示文字樣式 */
        #instruction {
            position: absolute;
            bottom: 15%;
            width: 100%;
            text-align: center;
            color: rgba(255, 255, 255, 0.7);
            font-size: 1.2rem;
            font-family: sans-serif;
            z-index: 3;
            pointer-events: none; /* 讓點擊穿透文字 */
            transition: opacity 0.5s;
        }

        /* 點擊後的狀態 Class */
        .is-lit #dim-image {
            opacity: 0; /* 圖片淡出 */
        }
        
        .is-lit #lit-video {
            opacity: 1; /* 影片淡入 */
        }

        .is-lit #instruction {
            opacity: 0; /* 文字消失 */
        }
    </style>
</head>
<body>

    <div id="container" onclick="playVideo()">
        <img id="dim-image" src="dim_lantern.jpg" alt="點擊前">
        
        <video id="lit-video" src="lit_video.mp4" playsinline muted preload="auto"></video>

        <div id="instruction">輕觸螢幕點亮孔明燈</div>
    </div>

    <script>
        let hasClicked = false;

        function playVideo() {
            if (hasClicked) return; // 防止重複點擊
            hasClicked = true;

            const container = document.getElementById('container');
            const video = document.getElementById('lit-video');

            // 1. 添加 class 來觸發 CSS 的淡入淡出動畫
            container.classList.add('is-lit');

            // 2. 播放影片
            // 稍微延遲一點點播放，讓淡入效果更順暢
            setTimeout(() => {
                 video.play().catch(error => {
                    console.log("影片播放失敗，可能是瀏覽器限制:", error);
                    // 如果自動播放失敗（極少數舊手機），確保影片至少顯示出來
                    video.style.opacity = 1; 
                });
            }, 100);

            // (可選) 如果影片播完後想要做什麼事，可以在這裡設定
            // video.onended = function() { 
            //    alert("祈福完成！");
            // };
        }
    </script>

</body>
</html>
